# custom-login-and-admin-restrict
Кастомизация страницы входа и ограничение доступа к админке Wordpress

Лицензия: GPL-2.0-or-later
Требуется PHP: 7.4 или выше
Требуется WordPress: 5.5 или выше

ОПИСАНИЕ

Custom Login & Admin Restrict — это плагин для WordPress, который:
- Кастомизирует страницу входа (логин)
- Ограничивает доступ к админке для не-администраторов
- Скрывает админ-бар у пользователей без прав manage_options

ОСНОВНЫЕ ВОЗМОЖНОСТИ

1. Автоматически использует Site Icon как логотип на странице входа
2. Добавляет CSS-стили для красивого отображения
3. Блокирует /wp-admin/ для всех, кроме администраторов
4. Не мешает работе AJAX, REST API и wp-cron
5. Скрывает админ-бар у обычных пользователей

УСТАНОВКА

Через админку WordPress:
1. Перейдите в Плагины → Добавить новый
2. Нажмите "Загрузить плагин"
3. Выберите ZIP-архив с этим плагином
4. Установите и активируйте

Вручную:
1. Распакуйте папку в /wp-content/plugins/
2. Активируйте через раздел "Плагины"

НАСТРОЙКА

Плагин работает без дополнительной настройки.

Логотип берётся из: Настройки → Изображения сайта → Иконка сайта
Доступ к админке имеют только пользователи с правами "manage_options"

РАСШИРЕНИЕ ЧЕРЕЗ ХУКИ

Плагин поддерживает фильтры:

// Изменить URL логотипа на странице входа
add_filter('login_headerurl', function() {
    return home_url('/');
});

// Изменить текст-подсказку логотипа
add_filter('login_headertext', function() {
    return get_bloginfo('name');
});

// Расширить права доступа к админке (например, разрешить редакторам)
add_filter('custom_login_can_manage', function($can_manage) {
    return current_user_can('edit_pages') || $can_manage;
});

БЕЗОПАСНОСТЬ

- Защита от прямого доступа к файлам
- Все внешние данные экранируются
- При блокировке возвращается HTTP 403
- Работа AJAX и REST API не нарушается

ПРОИЗВОДИТЕЛЬНОСТЬ

- Кэширование URL иконки сайта (1 час)
- Кэширование проверки существования файлов
- Версия CSS основана на filemtime
- Стили загружаются только при наличии файла

РАЗРАБОТЧИК

Автор: korsakov-kuzjma
Профиль GitHub: https://github.com/korsakov-kuzjma

ЛИЦЕНЗИЯ

Этот плагин распространяется по лицензии GPL-3.0-or-later.
Вы можете свободно использовать, модифицировать и распространять его.

ПОДДЕРЖКА

По вопросам и ошибкам обращайтесь:
- Через Issues на GitHub: https://github.com/korsakov-kuzjma/custom-login-and-admin-restrict/issues
